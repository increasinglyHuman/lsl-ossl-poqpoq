{
  "type": "script",
  "uuid": "2c9bc50b-27b9-4636-92d8-40923b2d4e64",
  "name": "PoseBall",
  "description": "2010-06-28 17:44:33 lsl2 script",
  "source": "\n\n\n// position to sit on the ball e.g <0.0, 0.0, 0.43>\n// sit  0.5 meter above the ball\nvector POSITION=<-0.5, 0.0, 0.3>;\n\n// hovertext above ball. \"\" for none.\n// add '\\n ' at the end to move text up i.e.\n// string HOVERTEXT=\"Sit Here\\n \";\nstring HOVERTEXT=\"\";\n\n// Pie Menu Sit Text. Will only work for the\n// main prim but included it anyway. If no text\n// is entered between \"\" it won't be used.\nstring SIT_TEXT=\"\";\n\n\n// hovertext color 'r,g,b' e.g. \"255,255,255\" (white)\nstring HOVER_RGB=\"255,255,255\";\n\n// LISTEN sets if this ball should listen for voice commands\n// or not. You only need to enable this for 1 ball if you\n// link several balls to an object. (to reduce lagg).\n// Change to TRUE to enable FALSE to disable. \ninteger LISTEN=TRUE;\n\n// What channel to listen for hide/show on. If you want to\n// listen to normal conversation (hide/show), set channel\n// to 0 otherwise the command will be /channel hide, show \ninteger CHANNEL=0;\n\n// * * * * * * * STOP MODIFY * * * * * * * *//\n\n\n\n\nset_text()\n{\n       if (llStringLength(HOVERTEXT)>0)\n        {\n            rgb=llCSV2List(HOVER_RGB);\n            llSetText(HOVERTEXT,<llList2Float(rgb,0)*0.003921568627450980392156862745098,llList2Float(rgb,1)*0.003921568627450980392156862745098,llList2Float(rgb,2)*0.003921568627450980392156862745098>,1.0);\n            \n        }    \n        else\n           llSetText(\"\",<0,0,0>,0.0);     \n}\nstart_listen()\n{\n    llListenRemove(listener);\n    if (LISTEN==TRUE)\n        listener=llListen(CHANNEL,\"\",\"\",\"\");\n}\nhide_me()\n{\n    llSetAlpha(0.0, ALL_SIDES);\n    llSetText(\"\",<0,0,0>,0.0);     \n}\nshow_me()\n{\n    llSetAlpha(1.0, ALL_SIDES);\n    set_text();                \n}\nlist rgb;\nstring animation;\ninteger listener;\ndefault \n{\n    state_entry() \n    {\n        if (llStringLength(SIT_TEXT)>0)\n            llSetSitText(SIT_TEXT);\n        llSitTarget(POSITION, ZERO_ROTATION); \n        set_text();\n        start_listen();\n    }\n    \n    on_rez(integer r)\n    {\n        start_listen();\n    }\n    \n    listen(integer channel, string name, key id, string msg)  \n    {\n        if (msg==\"hide\")\n        {\n            hide_me();\n            llMessageLinked(LINK_SET,0,\"hide\", NULL_KEY);\n        }\n        else if (msg==\"show\")\n        {\n            show_me();\n            llMessageLinked(LINK_SET,0,\"show\", NULL_KEY);\n        }\n    }\n    \n    changed(integer change) \n    { \n        if (change & CHANGED_LINK) \n        {\n            \n            if (llAvatarOnSitTarget() != NULL_KEY) \n            { \n                llRequestPermissions(llAvatarOnSitTarget(), PERMISSION_TRIGGER_ANIMATION);\n            }\n            else\n            {\n                integer perm=llGetPermissions();\n                if ((perm & PERMISSION_TRIGGER_ANIMATION) && llStringLength(animation)>0)       \n                llStopAnimation(animation);\n                llSetAlpha(1.0, ALL_SIDES);\n                set_text();\n                animation=\"\";\n            }\n        }\n    }\n    run_time_permissions(integer perm)\n    {\n        if (perm & PERMISSION_TRIGGER_ANIMATION)\n        {\n                llStopAnimation(\"sit\");\n                animation=llGetInventoryName(INVENTORY_ANIMATION,0);\n                llStartAnimation(animation);\n                llSetAlpha(0.0, ALL_SIDES);\n                llSetText(\"\",<0,0,0>,0.0);\n        }\n    }\n\n    link_message(integer sender_num, integer num, string str, key id)\n    {\n        if (str==\"hide\")\n        {\n            hide_me();\n        }\n        else if (str==\"show\")\n        {\n            show_me();\n        }\n    }\n}",
  "creator": {
    "name": "Sally Cherry",
    "uuid": "7a099eb9-d171-448c-808b-9e562b7cb668",
    "grid": "http://grid.kitely.com:8002"
  },
  "permissions": {
    "base": 581632,
    "current": 581632,
    "next": 581632,
    "everyone": 0,
    "group": 0
  },
  "object_name": "Conversation Sit #3 (FP)"
}