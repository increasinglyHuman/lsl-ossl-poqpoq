{
  "type": "script",
  "uuid": "b87ae9a4-b602-4836-b03e-9866c1a4e0f2",
  "name": "b87ae9a4-b602-4836-b03e-9866c1a4e0f2_script",
  "description": "",
  "source": "//start_unprocessed_text\n/*float MIN_DIMENSION=0.08; /|/ the minimum scale of a prim allowed, in any dimension\nfloat MAX_DIMENSION=0.3; /|/ the maximum scale of a prim allowed, in any dimension\n \nfloat max_scale;\nfloat min_scale;\n \nfloat   cur_scale = 1.0;\ninteger handle;\ninteger menuChan;\n \nfloat min_original_scale=10.0; /|/ minimum x/y/z component of the scales in the linkset\nfloat max_original_scale=0.0; /|/ minimum x/y/z component of the scales in the linkset\n\n\n \nlist link_scales = [];\nlist link_positions = [];\n \nmakeMenu()\n{\n    llListenRemove(handle);\n    menuChan = 50000 + (integer)llFrand(50000.00);\n    handle = llListen(menuChan,\"\",llGetOwner(),\"\");\n \n    \n    \n    llDialog(llGetOwner(),\"Max scale: \"+(string)max_scale+\"\\nMin scale: \"+(string)min_scale+\"\\n \\nCurrent scale: \"+\n        (string)cur_scale,[\"-0.25\",\"-0.10\",\"+0.05\",\"0.00\",\"-0.05\",\"+0.10\",\"+0.25\",\"MIN SIZE\",\"RESTORE\",\n        \"MAX SIZE\",\"DELETE\"],menuChan);\n}\n \ninteger scanLinkset()\n{\n    integer link_qty = 1;\n    integer link_idx;\n    vector link_pos;\n    vector link_scale;\n \n        \n                link_scales = [];\n                link_positions = [];                \n \n        \n        link_idx=0;\n        \n            \n            link_scale=llList2Vector(llGetPrimitiveParams([PRIM_SIZE]),0);\n \n            \n            \n            if(link_scale.x<min_original_scale) min_original_scale=link_scale.x;\n            else if(link_scale.x>max_original_scale) max_original_scale=link_scale.x;\n            if(link_scale.y<min_original_scale) min_original_scale=link_scale.y;\n            else if(link_scale.y>max_original_scale) max_original_scale=link_scale.y;\n            if(link_scale.z<min_original_scale) min_original_scale=link_scale.z;\n            else if(link_scale.z>max_original_scale) max_original_scale=link_scale.z;\n \n           link_scales    += link_scale;\n            \n    max_scale = MAX_DIMENSION/max_original_scale;\n    min_scale = MIN_DIMENSION/min_original_scale;\n \n    return TRUE;\n}\n \nresizeObject(float scale)\n{\n    integer link_qty = 1;\n    integer link_idx;\n    vector new_size;\n    vector new_pos;\n \n   \n        \n        link_idx=0;\n        \n        new_size   = scale * llList2Vector(link_scales, link_idx);\n            \n        llSetLinkPrimitiveParamsFast(link_idx, [PRIM_SIZE, new_size]);\n            \n        makeMenu();   \n}\n \ndefault\n{\n    state_entry()\n    {\n        if (scanLinkset())\n        {\n            \n        }\n       \n    }\n \n    touch_start(integer total)\n    {\n        if (llDetectedKey(0) == llGetOwner()) makeMenu();\n    }\n    \n    on_rez(integer start_param)\n    {\n        \n        llResetScript(); \n    }\n\n \n    listen(integer channel, string name, key id, string msg)\n    {\n        \n        if (id == llGetOwner())\n        {\n            if (msg == \"RESTORE\")\n            {\n                cur_scale = 1.0;\n            }\n            else if (msg == \"MIN SIZE\")\n            {\n                cur_scale = min_scale;\n            }\n            else if (msg == \"MAX SIZE\")\n            {\n                cur_scale = max_scale;\n            }\n            else if (msg == \"DELETE\")\n            {\n                llRemoveInventory(llGetScriptName());\n            }\n            else\n            {\n                cur_scale += (float)msg;\n            }\n \n            \n            if (cur_scale > max_scale) { cur_scale = max_scale; }\n            if (cur_scale < min_scale) { cur_scale = min_scale; }\n \n            resizeObject(cur_scale);\n        }\n    }\n}\n \n*/\n//end_unprocessed_text\n//nfo_preprocessor_version 0\n//program_version Phoenix Firestorm-Release v4.4.2.34167 - Joshua Kimagawa\n//mono\n\n\nfloat min_scale;\nfloat min_original_scale=10.0;\ninteger menuChan;\nfloat max_scale;\nfloat max_original_scale=0.0;\nlist link_scales = [];\nlist link_positions = [];\ninteger handle;\nfloat cur_scale = 1.0;\nfloat MIN_DIMENSION=0.08;\nfloat MAX_DIMENSION=0.3;\ninteger scanLinkset()\n{\n    integer link_qty = 1;\n    integer link_idx;\n    vector link_pos;\n    vector link_scale;\n \n        \n                link_scales = [];\n                link_positions = [];                \n \n        \n        link_idx=0;\n        \n            \n            link_scale=llList2Vector(llGetPrimitiveParams([PRIM_SIZE]),0);\n \n            \n            \n            if(link_scale.x<min_original_scale) min_original_scale=link_scale.x;\n            else if(link_scale.x>max_original_scale) max_original_scale=link_scale.x;\n            if(link_scale.y<min_original_scale) min_original_scale=link_scale.y;\n            else if(link_scale.y>max_original_scale) max_original_scale=link_scale.y;\n            if(link_scale.z<min_original_scale) min_original_scale=link_scale.z;\n            else if(link_scale.z>max_original_scale) max_original_scale=link_scale.z;\n \n           link_scales    += link_scale;\n            \n    max_scale = MAX_DIMENSION/max_original_scale;\n    min_scale = MIN_DIMENSION/min_original_scale;\n \n    return TRUE;\n}\n\n \n\n \nresizeObject(float scale)\n{\n    integer link_qty = 1;\n    integer link_idx;\n    vector new_size;\n    vector new_pos;\n \n   \n        \n        link_idx=0;\n        \n        new_size   = scale * llList2Vector(link_scales, link_idx);\n            \n        llSetLinkPrimitiveParamsFast(link_idx, [PRIM_SIZE, new_size]);\n            \n        makeMenu();   \n}\n\n \nmakeMenu()\n{\n    llListenRemove(handle);\n    menuChan = 50000 + (integer)llFrand(50000.00);\n    handle = llListen(menuChan,\"\",llGetOwner(),\"\");\n \n    \n    \n    llDialog(llGetOwner(),\"Max scale: \"+(string)max_scale+\"\\nMin scale: \"+(string)min_scale+\"\\n \\nCurrent scale: \"+\n        (string)cur_scale,[\"-0.25\",\"-0.10\",\"+0.05\",\"0.00\",\"-0.05\",\"+0.10\",\"+0.25\",\"MIN SIZE\",\"RESTORE\",\n        \"MAX SIZE\",\"DELETE\"],menuChan);\n}\n\n \ndefault\n{\n    state_entry()\n    {\n        if (scanLinkset())\n        {\n            \n        }\n       \n    }\n \n    touch_start(integer total)\n    {\n        if (llDetectedKey(0) == llGetOwner()) makeMenu();\n    }\n    \n    on_rez(integer start_param)\n    {\n        \n        llResetScript(); \n    }\n\n \n    listen(integer channel, string name, key id, string msg)\n    {\n        \n        if (id == llGetOwner())\n        {\n            if (msg == \"RESTORE\")\n            {\n                cur_scale = 1.0;\n            }\n            else if (msg == \"MIN SIZE\")\n            {\n                cur_scale = min_scale;\n            }\n            else if (msg == \"MAX SIZE\")\n            {\n                cur_scale = max_scale;\n            }\n            else if (msg == \"DELETE\")\n            {\n                llRemoveInventory(llGetScriptName());\n            }\n            else\n            {\n                cur_scale += (float)msg;\n            }\n \n            \n            if (cur_scale > max_scale) { cur_scale = max_scale; }\n            if (cur_scale < min_scale) { cur_scale = min_scale; }\n \n            resizeObject(cur_scale);\n        }\n    }\n}\n \n\n",
  "creator": {
    "name": "",
    "uuid": "",
    "grid": ""
  },
  "permissions": {},
  "object_name": ""
}