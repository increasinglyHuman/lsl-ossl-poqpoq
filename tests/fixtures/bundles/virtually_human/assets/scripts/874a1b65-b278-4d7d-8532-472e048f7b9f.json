{
  "type": "script",
  "uuid": "874a1b65-b278-4d7d-8532-472e048f7b9f",
  "name": "Multi Anims Pose Stand",
  "description": "2012-03-15 04:15:19 lsl2 script",
  "source": "//start_unprocessed_text\n/*/|/ Archived by: RvA Hax\n/|/ Downloaded from http:/|/www.secondlifesocial.net\n/|/ All copyright belongs to their respective owners.\n \n/|/ User adjustable settings\n \nvector animation_offset = <0,0,0.5>; /|/ Animation offset from stand\nstring base_float_text = \"\"; /|/ Float text prefix\nvector color_float_text = <1,1,1>; /|/ Floating text colour\nfloat alpha_float_text = 1.0; /|/ Floating text alpha transparency\n \n/|/ System settings - Do Not Change Anything Below!\n \ninteger animation_qty; /|/ Number of animations available\ninteger animation_current; /|/ Inventory number of current animation\nstring animation_name; /|/ Name of current animation\nstring new_animation_name; /|/ Name of next animation.\nstring float_text; /|/ Used when we evaluate the entire floating text message\nkey avatar; /|/ Key of the avatar who's sitting on me\n \nupdate_inventory()\n{\nllSetText(\"Updating animation list...\", color_float_text,alpha_float_text);\nanimation_qty = llGetInventoryNumber(INVENTORY_ANIMATION); /|/ Check how many anims we have?\nif (animation_qty > 0)\n{\nllWhisper(0, \"Total animations loaded in this stand: \" + (string)animation_qty);\nset_anim(0);\n}\nelse\n{\nllSetText(\"No Animations Found.. Offline\", color_float_text,alpha_float_text);\n}\n}\n \n/|/ Set the next animation available as the active one\nset_anim(integer inventory_number)\n{\n/|/ Get the name of the animation is inventory position (inventory_number)\nnew_animation_name = llGetInventoryName(INVENTORY_ANIMATION,inventory_number);\n/|/ Update the floating text to display new animation, and the number out of total available\n/|/float_text = base_float_text + new_animation_name + \"\\n(\" + (string)(animation_current + 1) + \" of \" + (string)animation_qty + \")\";\nllSetText(float_text, color_float_text,alpha_float_text);\n \n/|/ Get the key of the avatar on the stand (or if none is present)\navatar = llAvatarOnSitTarget();\n \nif (avatar != NULL_KEY) /|/ Is avatar is still posing, if so then..\n{\nllStopAnimation(animation_name); /|/ Stop current animation\nllStartAnimation(new_animation_name); /|/ Start next animation\n}\n/|/ Set the new animation name as the current\nanimation_name = new_animation_name;\n}\n \ndefault\n{\n \non_rez(integer num)\n{\nllResetScript(); /|/ Reset the script\n}\n \nstate_entry()\n{\nupdate_inventory(); /|/ Perform an inventory update and determine how many animations we have\n \nif (animation_qty > 0)\n{\nllSetSitText(\"Pose\");\nllSitTarget(animation_offset,ZERO_ROTATION);\nanimation_name = llGetInventoryName(INVENTORY_ANIMATION, 0);\nset_anim(animation_current);\n}\n \n}\n \n/|/ If touched, detect touch location and do the right thing\ntouch_start(integer num)\n{\n/|/ Get the name of the prim touched\nstring where = llGetLinkName(llDetectedLinkNumber(0));\n \nif (where == \"next\") /|/ The next button was pressed\n{\nanimation_current++; /|/ Increment the animation inventory pointer\nif ((animation_current + 1) > animation_qty) /|/ Have we reached the last animation in the object?\n{\nanimation_current = 0; /|/ We have, so wrap around back to the first one\n}\nset_anim(animation_current);\n}\nelse if (where == \"back\") /|/ The back button was pressed\n{\nanimation_current--; /|/ Decrement the animation inventory pointer\nif (animation_current < 0) /|/ Have we reached the first animation in the object?\n{\nanimation_current = animation_qty - 1; /|/ We have, so wrap around to the last one\n}\n \nset_anim(animation_current); /|/ Update the animation played by the stand\n}\n}\n \nchanged(integer change)\n{\nif (change & CHANGED_INVENTORY) /|/ Test for a changed inventory\n{\nupdate_inventory();\n}\n \n/|/ The object's sit target has been triggered\nif (change & CHANGED_LINK) /|/ Test for a changed link\n{\navatar = llAvatarOnSitTarget();\nif(avatar != NULL_KEY) /|/ Is that changed link an avatar?\n{\nllRequestPermissions(avatar,PERMISSION_TRIGGER_ANIMATION);\n}\nelse\n{\nif (llGetPermissionsKey() != NULL_KEY)\n{\nllStopAnimation(animation_name);\n}\n}\n}\n}\n \nrun_time_permissions(integer perm)\n{\nif (perm & PERMISSION_TRIGGER_ANIMATION)\n{\nllStopAnimation(\"sit\");\nllStartAnimation(animation_name);\n}  /|/ other permission checks would follow\n}\n}\n \n/|/ Second Life Socials data is provided to you for your information and learning purposes only.\n/|/ End*/\n//end_unprocessed_text\n//nfo_preprocessor_version 0\n//program_version Phoenix Firestorm-Release v4.4.2.34167 - Joshua Kimagawa\n//mono\n\n\nstring new_animation_name;\nstring float_text;\nvector color_float_text = <1,1,1>;\nkey avatar;\ninteger animation_qty;\nvector animation_offset = <0,0,0.5>;\nstring animation_name;\ninteger animation_current;\nfloat alpha_float_text = 1.0;\n \n \nupdate_inventory()\n{\nllSetText(\"Updating animation list...\", color_float_text,alpha_float_text);\nanimation_qty = llGetInventoryNumber(INVENTORY_ANIMATION); \nif (animation_qty > 0)\n{\nllWhisper(0, \"Total animations loaded in this stand: \" + (string)animation_qty);\nset_anim(0);\n}\nelse\n{\nllSetText(\"No Animations Found.. Offline\", color_float_text,alpha_float_text);\n}\n}\n\n \n\nset_anim(integer inventory_number)\n{\n\nnew_animation_name = llGetInventoryName(INVENTORY_ANIMATION,inventory_number);\n\n\nllSetText(float_text, color_float_text,alpha_float_text);\n \n\navatar = llAvatarOnSitTarget();\n \nif (avatar != NULL_KEY) \n{\nllStopAnimation(animation_name); \nllStartAnimation(new_animation_name); \n}\n\nanimation_name = new_animation_name;\n}\n\n \ndefault\n{\n \non_rez(integer num)\n{\nllResetScript(); \n}\n \nstate_entry()\n{\nupdate_inventory(); \n \nif (animation_qty > 0)\n{\nllSetSitText(\"Pose\");\nllSitTarget(animation_offset,ZERO_ROTATION);\nanimation_name = llGetInventoryName(INVENTORY_ANIMATION, 0);\nset_anim(animation_current);\n}\n \n}\n \n\ntouch_start(integer num)\n{\n\nstring where = llGetLinkName(llDetectedLinkNumber(0));\n \nif (where == \"next\") \n{\nanimation_current++; \nif ((animation_current + 1) > animation_qty) \n{\nanimation_current = 0; \n}\nset_anim(animation_current);\n}\nelse if (where == \"back\") \n{\nanimation_current--; \nif (animation_current < 0) \n{\nanimation_current = animation_qty - 1; \n}\n \nset_anim(animation_current); \n}\n}\n \nchanged(integer change)\n{\nif (change & CHANGED_INVENTORY) \n{\nupdate_inventory();\n}\n \n\nif (change & CHANGED_LINK) \n{\navatar = llAvatarOnSitTarget();\nif(avatar != NULL_KEY) \n{\nllRequestPermissions(avatar,PERMISSION_TRIGGER_ANIMATION);\n}\nelse\n{\nif (llGetPermissionsKey() != NULL_KEY)\n{\nllStopAnimation(animation_name);\n}\n}\n}\n}\n \nrun_time_permissions(integer perm)\n{\nif (perm & PERMISSION_TRIGGER_ANIMATION)\n{\nllStopAnimation(\"sit\");\nllStartAnimation(animation_name);\n}  \n}\n}\n \n\n\n",
  "creator": {
    "name": "Joshua Kimagawa",
    "uuid": "2cb38415-fb7b-4a93-86ae-cd36ac8eea0a",
    "grid": "http://grid.kitely.com:8002"
  },
  "permissions": {
    "base": 557056,
    "current": 557056,
    "next": 557056,
    "everyone": 0,
    "group": 0
  },
  "object_name": "[Kima Deluxe]  Simple Pose Stand"
}