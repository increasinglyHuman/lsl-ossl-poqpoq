{
  "type": "script",
  "uuid": "8663b4ea-b503-4872-a3f7-c28dfd9a2b53",
  "name": "powerSlideScript",
  "description": "senses if an avatar is in range",
  "source": "integer pCurrentSlide = 0;\ninteger pSlideCount;\ninteger pLockState = 0;\nlist pAccessList = [];\ninteger dialog_channel= 1751;\nkey pLastId;\n\n\ndefault\n{\n    state_entry()\n    {\n         llListen(dialog_channel,\"\", \"\",\"\");\n         integer number = llGetInventoryNumber(INVENTORY_TEXTURE);\n         pSlideCount = number;\n         string name1 = llGetInventoryName(INVENTORY_TEXTURE, 1);\n         string name2 = llGetInventoryName(INVENTORY_TEXTURE, 2);\n         string name3 = llGetInventoryName(INVENTORY_TEXTURE, 3);\n         string name4 = llGetInventoryName(INVENTORY_TEXTURE, 4);\n         string name5 = llGetInventoryName(INVENTORY_TEXTURE, 5);\n         llSetLinkTexture(4, name1, 3);\n         llSetLinkTexture(5, name2, 3);\n         llSetLinkTexture(6, name3, 3);\n         llSetLinkTexture(7, name4, 3);\n         llSetLinkTexture(8, name5, 3);\n         string name = llGetInventoryName(INVENTORY_TEXTURE, pCurrentSlide);\n         llSetTexture(name, 3);  \n         if (pLockState  == 0) \n         {\n             llSetLinkTexture(10, \"39773158-e0ff-45c5-a6ba-98b0fb27c2ce\", 3);\n            }else{\n             llSetLinkTexture(10, \"7f4c7701-244f-4ea3-9602-61d9a2667593\", 3);\n         }                  \n    }\n        on_rez(integer start_param)\n    {\n        llResetScript(); \n    }\n    touch_start(integer total_number)\n        {\n            pLastId = llDetectedKey(0);\n        integer number = llGetInventoryNumber(INVENTORY_TEXTURE);\n        pSlideCount = number;\n        string button = llGetLinkName(llDetectedLinkNumber(0)); \n        if (button == \"lock\")\n        {\n        }else{\n            if (pLockState == 1)\n            {\n                if (llDetectedKey(0) != llGetOwner())\n                {\n                    string person = llDetectedName(0);\n                    list tTest = [person];\n                    integer foundIndex = llListFindList(pAccessList, tTest);\n                    if (foundIndex == -1)\n                    {\n                        llInstantMessage(llDetectedKey(0), \"You do not have permission to use this viewer.\");\n                        llInstantMessage(llDetectedKey(0), \"You may request permission from the owner, by clicking the lock on the side of the screen.\");\n                        return;\n                    }\n                }\n            }\n        }\n        list tButtonList = [\"back\", \"open\", \"1\",\"2\",\"3\",\"4\",\"5\",\"next\",\"lock\"];\n        list tTestA = [(button)];\n        integer foundIndexA = llListFindList(tButtonList, tTestA);\n        if (foundIndexA == -1)\n        {\n            if (pCurrentSlide < pSlideCount) \n            { \n                pCurrentSlide += 1;\n                }else{\n                pCurrentSlide = 0;\n            }\n        }\n        if (button == \"lock\")\n        {\n            if (llDetectedKey(0) != llGetOwner())\n            {\n                string person = llDetectedName(0);\n                list tTest = [person];\n                integer foundIndex = llListFindList(pAccessList, tTest);\n                if (foundIndex == -1)\n                {\n                    list pApprovalMenu = [];\n                    list tList = [(person), \"No Access\"];\n                    pApprovalMenu = llListInsertList(pApprovalMenu, tList, 0);\n                    llDialog( llGetOwner(), (\"\\n \\n\"+person+\" has asked to use your slide viewer. Grant permission to whom?\"), pApprovalMenu, dialog_channel );\n                }else{\n                    llInstantMessage(llDetectedKey(0), ((person) + \" is logging out. Access control is now removed for this user.\"));\n                    pAccessList = llDeleteSubList(pAccessList, foundIndex, foundIndex);\n                }\n            }else{\n                if (pLockState == 0) {\n                    pLockState = 1;\n                    llSetLinkTexture(10, \"7f4c7701-244f-4ea3-9602-61d9a2667593\", 3);\n                }else{\n                    pLockState = 0;\n                    llSetLinkTexture(10, \"39773158-e0ff-45c5-a6ba-98b0fb27c2ce\", 3);\n                } \n            }     \n        }\n    if (button == \"back\")\n    {\n        if (pCurrentSlide > 0) \n        { \n            pCurrentSlide = pCurrentSlide - 1;\n        }else{\n            pCurrentSlide = pSlideCount - 1;\n        }\n    }\n    if (button == \"open\")\n    {\n        pCurrentSlide = 0;\n    }\n    if (button == \"1\")\n    {\n        if (pCurrentSlide < pSlideCount) \n        { \n            pCurrentSlide += 1;\n        }else{\n            pCurrentSlide = 0;\n        }\n    }\n    if (button == \"2\")\n    {\n        if (pCurrentSlide+2 < pSlideCount) \n        { \n            pCurrentSlide += 2;\n        }else{\n            integer dif = (pSlideCount - pCurrentSlide);\n            pCurrentSlide = 2-dif;\n        }\n    }\n    if (button == \"3\")\n    {\n        if (pCurrentSlide+3 < pSlideCount) \n        { \n            pCurrentSlide += 3;\n        }else{\n            integer dif = (pSlideCount - pCurrentSlide);\n            pCurrentSlide = 3-dif;\n        }\n    }\n    if (button == \"4\")\n    {\n        if (pCurrentSlide+4 < pSlideCount) \n        { \n            pCurrentSlide += 4;\n        }else{\n            integer dif = (pSlideCount - pCurrentSlide);\n            pCurrentSlide = 4-dif;\n        }\n    }\n    if (button == \"5\")\n    {\n        if (pCurrentSlide+5 < pSlideCount) \n        { \n            pCurrentSlide += 5;\n        }else{\n            integer dif = (pSlideCount - pCurrentSlide);\n            pCurrentSlide = 5-dif;\n        }\n    }      \n    if (button == \"next\")\n    {\n        if (pCurrentSlide < pSlideCount) \n        { \n            pCurrentSlide += 1;\n        }else{\n            pCurrentSlide = 0;\n        }\n    }\n    string name = llGetInventoryName(INVENTORY_TEXTURE, pCurrentSlide);\n    if (name != \"\") {\n        llSetTexture(name, 3);\n    }else{\n        pCurrentSlide = 0;\n        string nameX = llGetInventoryName(INVENTORY_TEXTURE, pCurrentSlide);\n        llSetTexture(nameX, 3);\n    }\n    if (pCurrentSlide + 1 < pSlideCount) {\n         string name1 = llGetInventoryName(INVENTORY_TEXTURE, pCurrentSlide+1);\n         llSetLinkTexture(4, name1, 3);\n    }else{\n        integer dif = (pSlideCount - pCurrentSlide);\n        string name1 = llGetInventoryName(INVENTORY_TEXTURE, 1-dif);\n        llSetLinkTexture(4, name1, 3);\n    }\n    if (pCurrentSlide + 2 < pSlideCount) {\n        string name2 = llGetInventoryName(INVENTORY_TEXTURE, pCurrentSlide + 2);\n        llSetLinkTexture(5, name2, 3);\n    }else{\n        integer dif = (pSlideCount - pCurrentSlide);\n        string name2 = llGetInventoryName(INVENTORY_TEXTURE, 2-dif);\n        llSetLinkTexture(5, name2, 3);\n    }\n    if (pCurrentSlide + 3 < pSlideCount) {\n        string name3 = llGetInventoryName(INVENTORY_TEXTURE, pCurrentSlide + 3);\n        llSetLinkTexture(6, name3, 3);\n    }else{\n        integer dif = (pSlideCount - pCurrentSlide);\n        string name3 = llGetInventoryName(INVENTORY_TEXTURE, 3-dif);\n        llSetLinkTexture(6, name3, 3);\n    }\n    if (pCurrentSlide + 4 < pSlideCount) {\n        string name4 = llGetInventoryName(INVENTORY_TEXTURE, pCurrentSlide + 4);\n        llSetLinkTexture(7, name4, 3);\n    }else{\n        integer dif = (pSlideCount - pCurrentSlide);\n        string name4 = llGetInventoryName(INVENTORY_TEXTURE, 4-dif);;\n        llSetLinkTexture(7, name4, 3);\n    }\n    if (pCurrentSlide + 5 < pSlideCount) {\n        string name5 = llGetInventoryName(INVENTORY_TEXTURE, pCurrentSlide + 5);\n        llSetLinkTexture(8, name5, 3);\n    }else{\n        integer dif = (pSlideCount - pCurrentSlide);\n        string name5 = llGetInventoryName(INVENTORY_TEXTURE, 5-dif);\n        llSetLinkTexture(8, name5, 3);\n    }     \n}\n    listen(integer incoming_channel, string name, key id, string mes)\n    {\n    if(id == llGetOwnerKey(id)){\n        if (incoming_channel == dialog_channel){\n            if (mes != \"No Access\"){\n                llInstantMessage(pLastId, (name + \" has granted \"+mes+\" permission to use their slide viewer.\"));\n                list insertNameList = [(mes)];\n                list tTest = [mes];\n                integer foundIndex = llListFindList(pAccessList, tTest);\n                    if (foundIndex == -1){\n                        pAccessList = llListInsertList(pAccessList, insertNameList, 0);\n                    }else{\n                        llInstantMessage(pLastId, (mes+ \" was already on the access list.\"));   \n                    }\n            }else{\n                llInstantMessage(pLastId, (name + \" has denied your request for permission to use their slide viewer.\"));\n            }\n            }\n        }\n    }\n}\n",
  "creator": {
    "name": "Allen Partridge",
    "uuid": "fb65c818-b6e2-4367-8f65-a069ff0443bf",
    "grid": "http://grid.kitely.com:8002"
  },
  "permissions": {
    "base": 2147483647,
    "current": 2147483647,
    "next": 557056,
    "everyone": 32768,
    "group": 0
  },
  "object_name": "Preso-Matic Turbo-KITELY-b"
}